<EntityList name="NFMPFilterGroup" RootFilterExpression="$[?(@.className=='netw.NetworkElement')]" FilterHandler="com.nokia.nsw.uiv.adapter.handler.xml.NFMPL2VPNGenericNodeHandler">
	<Entity type="PhysicalDevice" markForAsso="true">
		<Filter>
			<ValueExpression>contains(/JsonRootNode/className,'netw.NetworkElement') 
			</ValueExpression>
		</Filter>
		<AttributeList>
			<Attribute>
				<Name>LocalName</Name>
				<ValueExpression>/JsonRootNode/siteName</ValueExpression>
				<Context>
					<ValueExpression/>
				</Context>
			</Attribute>
			<Attribute>
				<Name>Context</Name>
				<ValueExpression>substring-before(/JsonRootNode/objectFullName,concat(':',/JsonRootNode/name))
			</ValueExpression>
			</Attribute>
			<Attribute>
				<Name>Kind</Name>
				<ValueExpression/>
				<DefaultValue>AggPhysicalDevice</DefaultValue>
			</Attribute>
			<Attribute>
				<Name>Category</Name>
				<ValueExpression>/JsonRootNode/chassisType</ValueExpression>
				<DefaultValue/>
			</Attribute>
			<Attribute>
				<Name>DiscoveredName</Name>
				<ValueExpression>/JsonRootNode/objectFullName</ValueExpression>
				<DefaultValue/>
			</Attribute>
			<Attribute>
				<Name>DisplayName</Name>
				<ValueExpression>/JsonRootNode/displayedName</ValueExpression>
				<DefaultValue/>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/mgmtIpAddrType</ValueExpression>
				<Key>mgmtIpAddrType</Key>
			</Attribute>
			  <Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/operationalState</ValueExpression>
				<Key>aggOperationalState</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/administrativeState</ValueExpression>
				<Key>aggAdministrativeState</Key>
			</Attribute>
			
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/pbbSrcBVplsMacAddr</ValueExpression>
				<Key>PbbSrcBVplsMacAddr</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/ipAddress</ValueExpression>
				<Key>ipAddress</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/systemAddress</ValueExpression>
				<Key>systemAddress</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/chassisType</ValueExpression>
				<Key>chassisType</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/chassisMode</ValueExpression>
				<Key>chassisMode</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/version</ValueExpression>
				<Key>version</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/systemCpmType</ValueExpression>
				<Key>systemCpmType</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/licenseConsumed</ValueExpression>
				<Key>licenseConsumed</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/licensedProduct</ValueExpression>
				<Key>licensedProduct</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/siteId</ValueExpression>
				<Key>siteId</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/siteName</ValueExpression>
				<Key>siteName</Key>
			</Attribute>
		</AttributeList>
		<AssoicationList>
		
		<DirectAssoications>
				<DirectAssoication Direction="INCOMING">
					<LocalName>
						<ValueExpression>if(/JsonRootNode/emsName) then /JsonRootNode/emsName else "" </ValueExpression>
					</LocalName>                  
					<Context>
						<ValueExpression></ValueExpression>
					</Context> 
	                <Target>LogicalDevice</Target>
					<Type>MANAGES</Type>				
				</DirectAssoication>
		</DirectAssoications>
		
			<KeyBasedAssoication>
				<SelfKey>
					<Key>
						<Name>Spoketoequipment</Name>
						<!-- <ValueExpression>concat('CardSlotToCard/',/JsonRootNode/siteId,'/',/JsonRootNode/shelfId,'/',/JsonRootNode/slotId)</ValueExpression>-->
						<ValueExpression>concat('SDP/',/JsonRootNode/siteId)</ValueExpression>
					</Key>
				</SelfKey>
				<SelfKey>
					<Key>
						<Name>Spoketoequipment1</Name>
						<!-- <ValueExpression>concat('CardSlotToCard/',/JsonRootNode/siteId,'/',/JsonRootNode/shelfId,'/',/JsonRootNode/slotId)</ValueExpression>-->
						<ValueExpression>concat('MDP/',/JsonRootNode/siteId)</ValueExpression>
					</Key>
				</SelfKey>
				
				<!-- newly added -->
				<SelfKey>
					<Key>
						<Name>PhysicalDeviceAssoc</Name>
						<!-- <ValueExpression>concat('CardSlotToCard/',/JsonRootNode/siteId,'/',/JsonRootNode/shelfId,'/',/JsonRootNode/slotId)</ValueExpression>-->
						<ValueExpression>/JsonRootNode/siteId</ValueExpression>
					</Key>
				</SelfKey>
			
				<JoinKey>
					<Association>
						<Target>LogicalDevice</Target>
						<Type>HOSTS</Type>
					</Association>
					<Key>
						<Name>LogicalEquipment</Name>
						<ValueExpression>concat(/JsonRootNode/siteName,'/',/JsonRootNode/siteId)</ValueExpression>
					</Key>
				</JoinKey>
				<JoinKey>
					<Association>
						<Target>PhysicalComponent</Target>
						<Type>CONTAINS</Type>
					</Association>
					<Key>
						<Name>SREquipment2Shelf</Name>
						<ValueExpression>/JsonRootNode/siteName</ValueExpression>
					</Key>
				</JoinKey>
			</KeyBasedAssoication>
		</AssoicationList>
	</Entity>
</EntityList>
