<EntityList name="NFMPFilterGroup" RootFilterExpression="$[?(@.className=='netw.DiscoveredPhysicalLink')]" FilterHandler="com.nokia.nsw.uiv.adapter.handler.xml.NFMPL2VPNGenericNodeHandler">
	<Entity type="PhysicalLink" markForAsso="true">
		<Filter>
			<ValueExpression>(/JsonRootNode/className eq 'netw.DiscoveredPhysicalLink')</ValueExpression>
		</Filter>
		<AttributeList>
			<Attribute>
				<Name>LocalName</Name>
				<ValueExpression>/JsonRootNode/name</ValueExpression>
				<Context>
					<ValueExpression/>
				</Context>
			</Attribute>
			<Attribute>
				<Name>Context</Name>
				<ValueExpression>substring-before(/JsonRootNode/objectFullName,concat(':',/JsonRootNode/name))</ValueExpression>
				<DefaultValue/>
			</Attribute>
			<Attribute>
				<Name>Kind</Name>
				<ValueExpression/>
				<!-- <ValueExpression>if(contains(/JsonRootNode/className,'ProcessorCard')) then 'ProcessorCard' else(if(contains(/JsonRootNode/className,'BaseCard')) then 'BaseCard' else 'Card')</ValueExpression> -->
				<DefaultValue>AggPhysicalLink</DefaultValue>
			</Attribute>
			<Attribute>
				<Name>Category</Name>
				<ValueExpression>/JsonRootNode/linkDiscoveredFrom</ValueExpression>
				<DefaultValue/>
			</Attribute>
			<Attribute>
				<Name>DiscoveredName</Name>
				<ValueExpression>/JsonRootNode/objectFullName</ValueExpression>
				<DefaultValue/>
			</Attribute>
			<Attribute>
				<Name>DisplayName</Name>
				<ValueExpression>concat('PhysicalLink/',/JsonRootNode/displayedName)</ValueExpression>
				<DefaultValue/>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/description</ValueExpression>
				<Key>description</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endPointBChassisId</ValueExpression>
				<Key>endPointBChassisId</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endPointAChassisId</ValueExpression>
				<Key>endPointAChassisId</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<!-- <ValueExpression>/JsonRootNode/deploymentState</ValueExpression> -->
				<ValueExpression>if(/JsonRootNode/deploymentState = 0) then "deployed" else /JsonRootNode/deploymentState</ValueExpression>
				<Key>deploymentState</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/linkType</ValueExpression>
				<Key>linkType</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/linkDiscoveredFrom</ValueExpression>
				<Key>linkDiscoveredFrom</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/physicalLinkScope</ValueExpression>
				<Key>physicalLinkScope</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/remotePeerPointers</ValueExpression>
				<Key>remotePeerPointers</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/networkElementEndpointAPointer</ValueExpression>
				<Key>networkElementEndpointAPointer</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/networkElementEndpointBPointer</ValueExpression>
				<Key>networkElementEndpointBPointer</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endpointAPointer</ValueExpression>
				<Key>endpointAPointer</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endpointBPointer</ValueExpression>
				<Key>specificCardType</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endPointASiteId</ValueExpression>
				<Key>endPointASiteId</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endPointBSiteId</ValueExpression>
				<Key>endPointBSiteId</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endPointASiteName</ValueExpression>
				<Key>endPointASiteName</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endPointBSiteName</ValueExpression>
				<Key>endPointBSiteName</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/operationalState</ValueExpression>
				<Key>operationalState</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endPointAType</ValueExpression>
				<Key>endPointAType</Key>
			</Attribute>
			<Attribute>
				<Name>Property</Name>
				<ValueExpression>/JsonRootNode/endPointBType</ValueExpression>
				<Key>endPointBType</Key>
			</Attribute>
		</AttributeList>
		<AssoicationList>
			<KeyBasedAssoication>
				<!--
			<SelfKey>			
			<Key>
                  <Name>CardToPort</Name>
                  <ValueExpression>replace(concat(/JsonRootNode/ne-id,'/',substring-before(substring-after(/JsonRootNode/parent,'equipment-id='),']')),"'","")</ValueExpression>
               </Key>	
             </SelfKey>
			 -->
				<JoinKey>
					<Association>
						<Target>PhysicalPort</Target>
						<Type>CONNECTS</Type>
					</Association>
					<Key>
						<Name>PhysicalLinkToPhysicalPortA</Name>
						<ValueExpression>concat('PhysicalLinkToPhysicalPortA/',/JsonRootNode/endpointAPointer)</ValueExpression>
					</Key>
				</JoinKey>
				<JoinKey>
					<Association>
						<Target>PhysicalPort</Target>
						<Type>CONNECTS</Type>
					</Association>
					<Key>
						<Name>PhysicalLinkToPhysicalPortB</Name>
						<ValueExpression>concat('PhysicalLinkToPhysicalPortB/',/JsonRootNode/endpointBPointer)</ValueExpression>
					</Key>
				</JoinKey>
			</KeyBasedAssoication>
		</AssoicationList>
	</Entity>
</EntityList>
